'use client';
import { useRouter } from 'next/navigation';
import { useEffect, useState } from 'react';

const Gnb = () => {
  const [activeMenu, setActiveMenu] = useState<string>('studyroom');
  const router = useRouter(); // useRouter 훅 사용

  useEffect(() => {
    if (activeMenu === 'studyroom') {
      router.push('/studyroom');
    }
  }, [activeMenu, router]);

  const handleMenuClick = (menuName: string, route: string) => {
    setActiveMenu(menuName);
    router.push(route); // 클릭 시 해당 경로로 라우팅
  };

  const setMenuColor = (iconName: string) => {
    return activeMenu === iconName ? 'text-primary' : 'text-[#82829B]';
  };

  const menuItems = [
    {
      name: 'studyroom',
      label: '스터디룸',
      icon: (
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="stroke-current" // stroke-current 클래스를 추가
        >
          <path
            d="M17.562 9.22206L17.036 10.1501C16.541 11.0231 16.293 11.4591 15.754 11.4971C15.214 11.5351 14.986 11.2231 14.529 10.5991C14.021 9.90009 13.6952 9.08555 13.581 8.22906C13.474 7.43006 13.421 7.03106 13.291 6.83406C13.085 6.52106 12.669 6.34906 12.359 6.16706C11.542 5.68706 11.133 5.44706 11.026 5.03806C10.918 4.63106 11.154 4.21506 11.626 3.38306C12.098 2.55106 12.334 2.13506 12.735 2.02606C13.135 1.91606 13.545 2.15706 14.362 2.63706C14.672 2.82006 15.026 3.09906 15.396 3.12506C15.628 3.14106 15.995 2.98806 16.728 2.68306C17.5143 2.35384 18.3724 2.23328 19.219 2.33306C19.979 2.42406 20.359 2.47006 20.595 2.96306C20.833 3.45806 20.585 3.89406 20.09 4.76706L19.564 5.69306M17.562 9.22206L17.996 9.47706C18.2238 9.61047 18.4759 9.69708 18.7376 9.7318C18.9993 9.76653 19.2653 9.74868 19.5201 9.67929C19.7748 9.60991 20.0131 9.49039 20.221 9.32774C20.4289 9.16509 20.6023 8.96257 20.731 8.73206C20.9973 8.26437 21.0697 7.71092 20.9327 7.19046C20.7957 6.66999 20.4601 6.22397 19.998 5.94806L19.564 5.69306M17.562 9.22206L19.564 5.69306M6 12.0001L13 7.00006M7 22.0001H14M6 15.0001L11 22.0001M7 13.0001C7 13.5305 6.78929 14.0392 6.41421 14.4143C6.03914 14.7893 5.53043 15.0001 5 15.0001C4.46957 15.0001 3.96086 14.7893 3.58579 14.4143C3.21071 14.0392 3 13.5305 3 13.0001C3 12.4696 3.21071 11.9609 3.58579 11.5858C3.96086 11.2108 4.46957 11.0001 5 11.0001C5.53043 11.0001 6.03914 11.2108 6.41421 11.5858C6.78929 11.9609 7 12.4696 7 13.0001Z"
            stroke="currentColor" // currentColor로 변경
            strokeWidth="1.5" // strokeWidth와 다른 속성들은 유지
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
      ),
      route: '/studyroom',
    },
    {
      name: 'search',
      label: '탐색',
      icon: (
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="stroke-current" // stroke-current 클래스를 추가
        >
          <path
            d="M16.8927 16.9195L19.9727 19.9995M19.0837 11.5805C19.0837 15.7675 15.7007 19.1615 11.5287 19.1615C7.35566 19.1615 3.97266 15.7675 3.97266 11.5815C3.97266 7.39251 7.35566 3.99951 11.5277 3.99951C15.7007 3.99951 19.0837 7.39351 19.0837 11.5805Z"
            stroke="currentColor" // currentColor로 변경
            stroke-width="1.44231"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      ),
      route: '/search',
    },
    {
      name: 'manageStudyroom',
      label: '스터디룸 관리',
      icon: (
        // 아이콘 변경 필요 (현재 커뮤니티 아이콘)
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
          className="fill-current">
          <g clip-path="url(#clip0_95_2864)">
            <path
              d="M15.333 17.3329C15.333 17.5097 15.2628 17.6793 15.1377 17.8043C15.0127 17.9293 14.8432 17.9996 14.6663 17.9996H5.33301C5.18634 17.9996 5.04634 18.1329 4.92634 18.2196L2.66634 19.9996V9.33289C2.66634 9.15607 2.73658 8.98651 2.8616 8.86148C2.98663 8.73646 3.1562 8.66622 3.33301 8.66622H5.90634V7.33289H3.33301C2.80257 7.33289 2.29387 7.5436 1.91879 7.91867C1.54372 8.29374 1.33301 8.80245 1.33301 9.33289V21.3329C1.334 21.4567 1.36945 21.5778 1.43539 21.6826C1.50133 21.7874 1.59515 21.8717 1.70634 21.9262C1.81346 21.9749 1.93157 21.9944 2.04866 21.9827C2.16575 21.971 2.27766 21.9285 2.37301 21.8596L5.80634 19.3329H14.7663C15.019 19.3404 15.2705 19.2959 15.5053 19.2022C15.7401 19.1085 15.9531 18.9676 16.1313 18.7882C16.3094 18.6089 16.4488 18.3948 16.5408 18.1594C16.6329 17.924 16.6756 17.6722 16.6663 17.4196V16.6662H15.333V17.3329Z"
              fill="currentColor"
            />
            <path
              d="M20.6663 2.66589H9.33301C8.80257 2.66589 8.29387 2.87661 7.91879 3.25168C7.54372 3.62675 7.33301 4.13546 7.33301 4.66589V12.6659C7.33301 13.1963 7.54372 13.705 7.91879 14.0801C8.29387 14.4552 8.80257 14.6659 9.33301 14.6659H18.3663L21.553 17.1392C21.6477 17.2093 21.7593 17.253 21.8764 17.2658C21.9936 17.2787 22.112 17.2603 22.2197 17.2126C22.3331 17.1585 22.429 17.0735 22.4962 16.9674C22.5635 16.8612 22.5993 16.7382 22.5997 16.6126V4.66589C22.6 4.14681 22.3984 3.64795 22.0377 3.27474C21.6769 2.90152 21.1851 2.6832 20.6663 2.66589ZM21.333 15.2926L18.9997 13.4726C18.8833 13.3822 18.7403 13.333 18.593 13.3326H9.33301C9.1562 13.3326 8.98663 13.2623 8.8616 13.1373C8.73658 13.0123 8.66634 12.8427 8.66634 12.6659V4.66589C8.66634 4.48908 8.73658 4.31951 8.8616 4.19449C8.98663 4.06946 9.1562 3.99923 9.33301 3.99923H20.6663C20.8445 4.0154 21.0107 4.09617 21.1335 4.22633C21.2563 4.35649 21.3272 4.52705 21.333 4.70589V15.2926Z"
              fill="currentColor"
            />
          </g>
          <defs>
            <clipPath id="clip0_95_2864">
              <rect width="24" height="24" fill="white" />
            </clipPath>
          </defs>
        </svg>
      ),
      route: 'manage-studyroom',
    },
    {
      name: 'mypage',
      label: '마이',
      icon: (
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="fill-current">
          <path
            d="M18.6209 14.482C19.3734 14.482 20.0951 14.781 20.6273 15.3131C21.1594 15.8452 21.4583 16.567 21.4583 17.3195V17.9958C21.4583 21.379 17.4764 23.9402 12.0002 23.9402C6.52388 23.9402 2.54199 21.5123 2.54199 17.9958V17.3195C2.54199 16.567 2.84094 15.8452 3.37306 15.3131C3.90519 14.781 4.62691 14.482 5.37944 14.482H18.6209ZM18.6209 15.9008H5.37944C5.02691 15.9008 4.68701 16.032 4.42596 16.2689C4.16491 16.5059 4.00142 16.8315 3.96734 17.1824L3.96072 17.3195V17.9958C3.96072 20.5249 7.16609 22.5215 12.0002 22.5215C16.6593 22.5215 19.9025 20.5306 20.0358 18.148L20.0396 17.9958V17.3195C20.0396 16.967 19.9084 16.6271 19.6715 16.366C19.4345 16.105 19.1089 15.9415 18.758 15.9074L18.6209 15.9008ZM12.0002 1.2406C12.7454 1.2406 13.4833 1.38739 14.1719 1.67258C14.8604 1.95777 15.486 2.37578 16.0129 2.90274C16.5399 3.42971 16.9579 4.0553 17.2431 4.74381C17.5283 5.43233 17.6751 6.17027 17.6751 6.91551C17.6751 7.66075 17.5283 8.39869 17.2431 9.0872C16.9579 9.77571 16.5399 10.4013 16.0129 10.9283C15.486 11.4552 14.8604 11.8732 14.1719 12.1584C13.4833 12.4436 12.7454 12.5904 12.0002 12.5904C10.4951 12.5904 9.05165 11.9925 7.9874 10.9283C6.92315 9.86402 6.32526 8.42059 6.32526 6.91551C6.32526 5.41043 6.92315 3.96699 7.9874 2.90274C9.05165 1.83849 10.4951 1.2406 12.0002 1.2406ZM12.0002 2.65933C10.8714 2.65933 9.78878 3.10774 8.99059 3.90593C8.19241 4.70412 7.74399 5.7867 7.74399 6.91551C7.74399 8.04432 8.19241 9.12689 8.99059 9.92508C9.78878 10.7233 10.8714 11.1717 12.0002 11.1717C13.129 11.1717 14.2116 10.7233 15.0097 9.92508C15.8079 9.12689 16.2563 8.04432 16.2563 6.91551C16.2563 5.7867 15.8079 4.70412 15.0097 3.90593C14.2116 3.10774 13.129 2.65933 12.0002 2.65933Z"
            fill="currentColor"
          />
        </svg>
      ),
      route: 'mypage',
    },
  ];

  return (
    <div className="w-[23.4375rem] h-[3.875rem] grid grid-cols-4 gap-3 bg-white drop-shadow-upside fixed bottom-0">
      {menuItems.map((item) => (
        <div
          className="flex flex-col justify-center items-center"
          onClick={() => handleMenuClick(item.name, item.route)}>
          <div className={setMenuColor(item.name)}>{item.icon}</div>
          <p className={`text-xs ${setMenuColor(item.name)}`}>{item.label}</p>
        </div>
      ))}
    </div>
  );
};

export default Gnb;
